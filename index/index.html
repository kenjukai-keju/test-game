<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Catch the Energy ‚ö°</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    background: radial-gradient(circle at center, #0f2027, #203a43, #2c5364);
    overflow: hidden;
    font-family: "Poppins", sans-serif;
    color: white;
    text-align: center;
  }

  h1 { margin: 10px; }

  #game {
    position: relative;
    width: 100vw;
    height: 80vh;
    border: 3px solid white;
    overflow: hidden;
    background: rgba(255, 255, 255, 0.05);
  }

  #player {
    position: absolute;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    width: 80px;
    height: 20px;
    background: linear-gradient(90deg, #00c6ff, #0072ff);
    border-radius: 10px;
    box-shadow: 0 0 20px #00f0ff;
  }

  .energy, .poison, .buff {
    position: absolute;
    top: -30px;
    width: 25px;
    height: 25px;
    border-radius: 50%;
    background-size: cover;
    background-position: center;
  }

  .energy { background-image: url("asset gamenya/energy.png"); box-shadow: 0 0 20px cyan; }
  .poison { background-image: url("asset gamenya/death.png"); box-shadow: 0 0 20px red; }

  .buff.shield { background-image: url('asset gamenya/shield.png'); }
  .buff.heart { background-image: url('asset gamenya/heart.png'); }
  .buff.muscle { background-image: url('asset gamenya/strength.png'); }

  #info {
    background-image: url("asset gamenya/letter-i.png");
    margin-top: 10px;
    font-size: 1.2em;
  }

  #gameover {
    position: absolute;
    top: 40%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 2em;
    display: none;
    color: yellow;
    text-align: center;
  }

  #gameover button {
    margin-top: 15px;
    padding: 8px 15px;
    font-size: 1em;
    border: none;
    border-radius: 10px;
    background: #00c6ff;
    color: white;
    cursor: pointer;
    transition: 0.2s;
  }
  #gameover button:hover {
    background: #0072ff;
  }

  /* Tombol kontrol */
  .control-btn {
    position: absolute;
    top: 10px;
    width: 35px;
    height: 35px;
    background: rgba(255,255,255,0.15);
    border: 2px solid white;
    border-radius: 50%;
    font-size: 20px;
    color: white;
    cursor: pointer;
    transition: 0.2s;
  }
  .control-btn:hover {
    background: rgba(255,255,255,0.3);
  }

  #pauseBtn { right: 60px; 
  background-image: url("asset gamenya/pause.png");
  }
  #infoBtn { right: 10px; 
  background-image: url("asset gamenya/letter-i.png");
  }

  /* Popup info */
  #infoPopup {
    display: none;
    position: absolute;
    top: 20%;
    left: 50%;
    transform: translate(-50%, -20%);
    background: aquamarine;
    padding: 20px;
    border-radius: 15px;
    width: 300px;
    text-align: left;
    border: 2px solid white;
  }

  #infoPopup img {
    width: 20px;
    vertical-align: middle;
  }

  #infoPopup button {
    margin-top: 10px;
    padding: 5px 10px;
    background: #00c6ff;
    border: none;
    color: white;
    border-radius: 8px;
    cursor: pointer;
  }
</style>
</head>
<body>
<h1>‚ö° Catch the Energy ‚ö°</h1>
<div id="game">
  <div id="player"></div>
  <div id="gameover">
    GAME OVER üò¢<br>
    <small>Nyawa habis, coba lagi!</small><br>
    <button onclick="restartGame()"></button>
  </div>

  <button id="pauseBtn" class="control-btn"></button>
  <button id="infoBtn" class="control-btn"></button>

  <div id="infoPopup">
    <h3>üéÆ Info Game</h3>
    <p><img href="asset gamenya/energy.png"> <b>Energy:</b> Tambah skor</p>
    <p><img href="asset gamenya/death.png"> <b>Death Orb:</b> Kurangi nyawa</p>
    <hr>
    <p><img src="asset gamenya/strength.png"> <b>Muscle:</b> Paddle jadi lebih besar 5 detik</p>
    <p><img src="asset gamenya/shield.png"> <b>Shield:</b> Kebal dari racun 5 detik</p>
    <p><img src="asset gamenya/heart.png"> <b>Heart:</b> Tambah 1 nyawa</p>
    <button onclick="closeInfo()">Tutup</button>
  </div>
</div>

<div id="info">Skor: <span id="score">0</span> | Nyawa: <span id="lives">3</span></div>

<script>
const game = document.getElementById("game");
const player = document.getElementById("player");
const scoreEl = document.getElementById("score");
const livesEl = document.getElementById("lives");
const gameover = document.getElementById("gameover");
const pauseBtn = document.getElementById("pauseBtn");
const infoBtn = document.getElementById("infoBtn");
const infoPopup = document.getElementById("infoPopup");

let score = 0;
let lives = 3;
let playerX = window.innerWidth / 2;
let immune = false;
let normalWidth = 80;
let buffActive = false;
let paused = false;

const catchSound = new Audio('asset gamenya/collect.wav');
const hitSound = new Audio('asset gamenya/mixkit-sword-slash-swoosh-1476.mp3');
const buff1sound = new Audio('asset gamenya/buff1.wav');
const buff2sound = new Audio('asset gamenya/buff2.wav');
const buff3sound = new Audio('asset gamenya/buff3.wav');

document.addEventListener("mousemove", (e) => {
  if (!paused) {
    playerX = e.clientX;
    player.style.left = playerX - 40 + "px";
  }
});

function spawnItem() {
  if (paused) return;
  const item = document.createElement("div");
  const isEnergy = Math.random() < 0.7;
  item.classList.add(isEnergy ? "energy" : "poison");
  item.style.left = Math.random() * (window.innerWidth - 30) + "px";
  item.style.top = "0px";
  game.appendChild(item);

  let fall = setInterval(() => {
    if (paused) return;
    let top = parseInt(item.style.top || 0);
    item.style.top = top + 5 + "px";

    const itemRect = item.getBoundingClientRect();
    const playerRect = player.getBoundingClientRect();

    if (
      itemRect.bottom >= playerRect.top &&
      itemRect.left < playerRect.right &&
      itemRect.right > playerRect.left
    ) {
      if (isEnergy) {
        score++;
        catchSound.play();
      } else if (!immune) {
        lives--;
        hitSound.play();
      }

      scoreEl.textContent = score;
      livesEl.textContent = lives;
      item.remove();
      clearInterval(fall);

      if (lives <= 0) {
        endGame();
      }
    }

    if (top > window.innerHeight) {
      item.remove();
      clearInterval(fall);
    }
  }, 30);
}

function spawnBuff() {
  if (paused) return;
  const buff = document.createElement("div");
  const buffType = Math.floor(Math.random() * 3);
  const types = ["muscle", "shield", "heart"];
  buff.classList.add("buff", types[buffType]);
  buff.dataset.type = buffType;
  buff.style.left = Math.random() * (window.innerWidth - 30) + "px";
  buff.style.top = "0px";
  game.appendChild(buff);

  let fall = setInterval(() => {
    if (paused) return;
    let top = parseInt(buff.style.top || 0);
    buff.style.top = top + 5 + "px";

    const buffRect = buff.getBoundingClientRect();
    const playerRect = player.getBoundingClientRect();

    if (
      buffRect.bottom >= playerRect.top &&
      buffRect.left < playerRect.right &&
      buffRect.right > playerRect.left
    ) {
      activateBuff(parseInt(buff.dataset.type));
      buff.remove();
      clearInterval(fall);
    }

    if (top > window.innerHeight) {
      buff.remove();
      clearInterval(fall);
    }
  }, 30);
}

function activateBuff(type) {
  if (buffActive) return;
  buffActive = true;

  switch (type) {
    case 0:
      buff2sound.play();
      player.style.width = normalWidth * 1.8 + "px";
      player.style.background = "lime";
      setTimeout(() => {
        player.style.width = normalWidth + "px";
        player.style.background = "linear-gradient(90deg, #00c6ff, #0072ff)";
        buffActive = false;
      }, 5000);
      break;
    case 1:
      buff1sound.play();
      immune = true;
      player.style.boxShadow = "0 0 25px violet";
      setTimeout(() => {
        immune = false;
        player.style.boxShadow = "0 0 20px #00f0ff";
        buffActive = false;
      }, 5000);
      break;
    case 2:
      buff3sound.play();
      lives++;
      livesEl.textContent = lives;
      buffActive = false;
      break;
  }
}

function endGame() {
  gameover.style.display = "block";
  clearInterval(spawnLoop);
  clearInterval(buffLoop);
}

function restartGame() {
  location.reload();
}

// pause/resume
pauseBtn.addEventListener("click", () => {
  paused = !paused;
  pauseBtn.textContent = paused ? "‚ñ∂Ô∏è" : "‚è∏Ô∏è";
});

// info popup
infoBtn.addEventListener("click", () => {
  infoPopup.style.display = "block";
  paused = true;
  pauseBtn.textContent = "‚ñ∂Ô∏è";
});
function closeInfo() {
  infoPopup.style.display = "none";
  paused = false;
  pauseBtn.textContent = "‚è∏Ô∏è";
}

const spawnLoop = setInterval(spawnItem, 700);
const buffLoop = setInterval(spawnBuff, 7000);
</script>
</body>
</html>
